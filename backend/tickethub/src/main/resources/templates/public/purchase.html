<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Compra - {{event.name}}</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="/css/main.css">
</head>
<body>

<!--LOCATION OF THE HEADER OF THE WEB-->

{{>components/header}}

<main class="flex-fill">
  <div class="container my-5">
    <h2 class="mb-4">Compra de entradas - {{event.name}}</h2>

    <div class="d-flex align-items-center gap-3 mb-4">
      <h4 class="mb-0">Selecciona el número de entradas que quieres comprar:</h4>
      <select name="ticketCount" class="form-select form-control-sm w-auto">
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
      </select>
    </div>

    <hr>

    <!-- Here there must be auto generation of the tickets catching the information from the selector of tickets above-->
    {{#tickets}}
    <div class="card mb-3 p-3">
      <div class="d-flex justify-content-between align-items-center">
        <strong>Entrada {{@index}}</strong>
        <div class="d-flex gap-2 align-items-center">
          <span>Zona:</span>
          <select name="zone" class="form-select form-control-sm w-auto">
            {{#zones}}
              <option value="{{id}}">{{name}}</option>
            {{/zones}}
          </select>
        </div>
        <span>Precio: {{price}}€</span>
        <span class="text-danger">Eliminar</span>
      </div>
    </div>
    {{/tickets}}

    <div class="d-flex align-items-center gap-2 mb-3">
      <strong class="mb-0">Aplicar descuento:</strong>
      <select name="discount" class="form-select form-control-sm w-auto">
        <option value="">Ninguno</option>
        {{#discounts}}
          <option value="{{discountID}}">
            {{discountName}}
            {{#amount}}(-{{amount}}€){{/amount}}
            {{#percent}}(-{{percent}}%){{/percent}}
          </option>
        {{/discounts}}
      </select>
      <button class="btn btn-outline-secondary btn-sm">+ Nuevo descuento</button>
    </div>

    {{^discounts}}
      <p>No hay descuentos disponibles para este evento.</p>
    {{/discounts}}

    <hr>
    <div class="col-md-3">
      <div class="mb-3">
        <strong><label class="form-label">Correo electrónico</label></strong>
        <input type="email" name="email" class="form-control">
      </div>
      <div class="mb-3">
        <strong><label class="form-label">Confirmación de correo electrónico</label></strong>
        <input type="email" name="emailConfirm" class="form-control">
      </div>
    </div>

    <h4 class="mb-4">Total: {{totalPrice}}€</h4>

    <hr>
    
    <h4 class="mb-3">Datos de pago</h4>

    <div class="row mb-3">
      <div class="col-md-5">
        <label class="form-label">Número de tarjeta</label>
        <input class="form-control" name="cardNumber" placeholder="Ejemplo: 1234 5678 9012 3456">
      </div>
    </div>

    <div class="d-flex gap-4 mb-4">
      <div>
        <label class="form-label">Mes</label>
        <select class="form-select form-control-sm w-auto">
          <option>01</option><option>02</option><option>03</option>
          <option>04</option><option>05</option><option>06</option>
          <option>07</option><option>08</option><option>09</option>
          <option>10</option><option>11</option><option>12</option>
        </select>
      </div>

      <div>
        <label class="form-label">Año</label>
        <select name="cardYear" class="form-select form-control-sm w-auto">
          <option>2026</option>
          <option>2027</option>
          <option>2028</option>
          <option>2029</option>
        </select>
      </div>

      <div>
        <label class="form-label">CVV</label>
        <input class="form-control form-control-sm" style="width:80px;" name="CVV" placeholder="123">
      </div>
    </div>

    <div class="d-flex justify-content-end">
      <button class="btn btn-outline-primary" type="button" onclick="location.href='/public/event/{{event.eventID}}'">
        Volver
      </button>
      <button class="btn btn-outline-primary" type="button" onclick="location.href='/public/confirmation/{{event.eventID}}'">
        Confirmar compra
      </button>
    </div>

  </div>
</main>

<!--LOCATION OF THE FOOTER OF THE WEB-->

{{>/components/footer}}

</body>
</html>

